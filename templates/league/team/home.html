{# league/templates/league/team_home.html #}
{% extends "base.html" %}

{% block content %}
<div class="container-fluid px-3 px-lg-4">

  {# âœ… Team Home is for ONE team, not a list of teams #}
  <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-3">
    <div>
      <h1 class="m-0">{{ team.name }}</h1>
      <div class="text-muted small">{{ team.league.name }}</div>
    </div>

    <div class="d-flex gap-2 flex-wrap">
      <a class="btn btn-primary" href="{% url 'team_roster' %}">ğŸ“‹ Roster</a>
      <a class="btn btn-outline-light" href="{% url 'daily_lineup' %}">ğŸ§¾ Lineup</a>
      <a class="btn btn-outline-light" href="{% url 'draft_room' team.league.id %}">ğŸ§  Draft Room</a>
      <a class="btn btn-outline-light" href="{% url 'league_dashboard_specific' team.league.id %}">ğŸ’ League Dashboard</a>
    </div>
  </div>

  <div class="row g-3">

    <div class="col-12 col-lg-6">
      <div class="card bg-secondary text-light h-100">
        <div class="card-body">
          <h2 class="h5 mb-3">Team Actions</h2>

          {% if roster_count == 0 %}
            <div class="alert alert-warning mb-0">
              Your roster is empty. Once you run your NHL import, youâ€™ll be able to draft or add players.
            </div>
          {% else %}
            <div class="text-light-50 small">
              Use the buttons above to manage roster/lineup and enter the draft room.
            </div>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="col-12 col-lg-6">
      <div class="card bg-secondary text-light h-100">
        <div class="card-body">
          <h2 class="h5 mb-3">Roster Snapshot</h2>

          <div class="d-flex gap-2 flex-wrap mb-3">
            <span class="badge bg-dark">Total: {{ roster_count }}</span>
            <span class="badge bg-dark">Goalies: {{ goalie_count }}</span>
            <span class="badge bg-dark">Skaters: {{ skater_count }}</span>
          </div>

          <div class="mt-2">
            <h3 class="h6 mb-2">By Position</h3>
            {% if pos_counts %}
              <ul class="list-group">
                {% for code, cnt in pos_counts.items %}
                  <li class="list-group-item bg-dark text-light d-flex justify-content-between">
                    <span>{{ code }}</span>
                    <span class="badge bg-secondary">{{ cnt }}</span>
                  </li>
                {% endfor %}
              </ul>
            {% else %}
              <p class="text-light-50 mb-0">No players yet.</p>
            {% endif %}
          </div>

        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}
